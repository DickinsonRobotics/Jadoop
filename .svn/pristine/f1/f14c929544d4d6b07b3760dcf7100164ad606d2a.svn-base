<project name="Jadoop" basedir=".">
	<description>
		Build file for Jadoop - A simple Java API for running
		grid computing jobs on a hadoop cluster.
	</description>

	<property file="build.properties" />

	<path id="jadoop.classpath">
		<fileset dir="${HadoopJars}/common" includes="*.jar" />
		<fileset dir="${HadoopJars}/hdfs" includes="*.jar" />
		<fileset dir="${HadoopJars}/mapreduce" includes="*.jar" />
	</path>

	<target name="compile-ex">
		<description>
			Compile the Jadoop examples source code into class files.
		</description>

		<mkdir dir="${Jadoop-build}" />
		<mkdir dir="${Jadoop-build-ex}" />

		<javac includeantruntime="false"
		       srcdir="${Jadoop-ex-src}"
		       destdir="${Jadoop-build-ex}">
			<classpath refid="jadoop.classpath" />
		</javac>

	</target>
	
	<target name="compile-src">
		<description>
			Compile the Jadoop source code into class files.
		</description>

		<mkdir dir="${Jadoop-build}" />

		<javac includeantruntime="false"
		       srcdir="${Jadoop-src}"
		       destdir="${Jadoop-build}">
			<classpath refid="jadoop.classpath" />
		</javac>

	</target>

	<target name="doc">
		<description>
    		Generate the JavaDoc for the Jadoop project.
    	</description>

		<mkdir dir="${Jadoop-build}" />
		<mkdir dir="${Jadoop-doc}" />

		<javadoc destdir="${Jadoop-doc}"
		         author="true"
		         version="true"
		         use="true"
		         windowtitle="Jadoop API"
		         overview="${Jadoop-src}/jadoop/overview.html"
		         sourcepath="${Jadoop-src}"
		         linksource="true"
		         defaultexcludes="yes">

			<classpath refid="jadoop.classpath" />
			<link href="${HadoopAPIDocs}" />
			<link href="${JavaAPIDocs}" />

		</javadoc>

	</target>

	<target name="dist" depends="clean,compile-src,compile-ex,doc">
		<description>
			Generate the Jadoop distribution. Makes the JadoopDist folder
			and collects all of the stuff together from the src, test, 
			build and hadoop directories to create a distribution and
			zips it up.
		</description>

		<mkdir dir="${Jadoop-dist}" />


	</target>

	<target name="clean">
		<description>
			Remove the build and distribution folders and all of their contents.
		</description>

		<delete dir="${Jadoop-build}" />
		<delete dir="${Jadoop-dist}" />
	</target>

</project>